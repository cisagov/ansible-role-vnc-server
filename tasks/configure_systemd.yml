---
- name: Set up VNC as a systemd service
  ansible.builtin.template:
    src: vncserver@.service
    dest: /lib/systemd/system/
    mode: 0644

- name: Systemd daemon-reload
  ansible.builtin.systemd:
    daemon_reload: true
  when:
    - ansible_service_mgr == "systemd"

- name: Enable VNC systemd service
  ansible.builtin.systemd:
    name: "vncserver@1.service"
    enabled: true
  when:
    - ansible_service_mgr == "systemd"
